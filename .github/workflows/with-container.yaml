on: [workflow_dispatch]

name: With Container

jobs:
  on-nscloud:
    runs-on: namespace-profile-testing-cache
    container: 
      image: mcr.microsoft.com/playwright:v1.39.0
      env:
        NSC_CACHE_PATH: ${{ env.NSC_CACHE_PATH }}
      volumes: 
        - /cache:/cache
    
    steps:
      - name: checkout
        uses: actions/checkout@v3
      - name: hello
        run: |
          echo Hello from container
      - name: Check env
        run: |
          env
          ls /cache
      - name: Setup Namespace npm cache
        uses: namespacelabs/nscloud-cache-action@v1
        with:
          path: |
            ./**/node_modules

  on-github:
    runs-on: ubuntu-latest
    container:
      image: debian:bullseye
    steps:
      - name: checkout
        uses: actions/checkout@v3
      - name: hello
        run: |
          echo Hello from container
